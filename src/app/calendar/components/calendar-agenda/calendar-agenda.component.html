<div class="margin-16">
  <mat-grid-list cols="7" [rowHeight]="rowHeight">
    <mat-grid-tile colspan="1" rowspan="1"
      ><div class="flex flex-align-center height-100 color-primary">
        <b>Mo</b>
      </div></mat-grid-tile
    >
    <mat-grid-tile colspan="1" rowspan="1" class="color-primary"
      ><div class="flex flex-align-center height-100 color-primary">
        <b>Di</b>
      </div></mat-grid-tile
    >
    <mat-grid-tile colspan="1" rowspan="1" class="color-primary"
      ><div class="flex flex-align-center height-100 color-primary">
        <b>Mi</b>
      </div></mat-grid-tile
    >
    <mat-grid-tile colspan="1" rowspan="1" class="color-primary"
      ><div class="flex flex-align-center height-100 color-primary">
        <b>Do</b>
      </div></mat-grid-tile
    >
    <mat-grid-tile colspan="1" rowspan="1" class="color-primary"
      ><div class="flex flex-align-center height-100 color-primary">
        <b>Fr</b>
      </div></mat-grid-tile
    >
    <mat-grid-tile colspan="1" rowspan="1" class="color-primary"
      ><div class="flex flex-align-center height-100 color-primary">
        <b>Sa</b>
      </div></mat-grid-tile
    >
    <mat-grid-tile colspan="1" rowspan="1" class="color-primary"
      ><div class="flex flex-align-center height-100 color-primary">
        <b>So</b>
      </div></mat-grid-tile
    >
    <mat-grid-tile
      *ngFor="let prevMonthDay of prevMonthDays; let i = index"
      colspan="1"
      rowspan="2"
    >
      <div
        class="calendar-agenda--tile calendar-agenda--tile-other flex flex-justify-center flex-align-center"
      >
        {{ prevMonthDay }}
      </div>
    </mat-grid-tile>
    <mat-grid-tile
      *ngFor="let monthDay of monthDays; let i = index"
      colspan="1"
      rowspan="2"
    >
      <div
        [ngClass]="{
          'color-primary font-size-18':
            monthDay === date &&
            currentYear === yearMonth.year &&
            currentMonth === yearMonth.month
        }"
        (click)="openCalendarDay(i)"
        class="calendar-agenda--tile flex flex-justify-center flex-align-center hover-primary margin-bottom-2 width-100"
      >
        <b>{{ monthDay }}</b>
        <div
          [ngClass]="{
            'calendar-agenda--tile-overlay':
              activeAppointmentDays.indexOf(monthDay) > -1
          }"
          class="font-size-12"
        >
          {{
            activeAppointmentPreviews[findIndex(monthDay)]?.appointments?.length
          }}
        </div>
      </div>
      <div
        *ngIf="findIndex(monthDay) > -1"
        class="calendar-agenda--tile-preview border-radius-8 font-size-12 padding-4 text-overflow-ellipsis"
      >
        {{ activeAppointmentPreviews[findIndex(monthDay)].appointments[0] }}
      </div>
    </mat-grid-tile>
    <mat-grid-tile
      *ngFor="let nextMonthDay of nextMonthDays; let i = index"
      colspan="1"
      rowspan="2"
    >
      <div
        class="calendar-agenda--tile calendar-agenda--tile-other flex flex-justify-center flex-align-center"
      >
        {{ nextMonthDay }}
      </div>
    </mat-grid-tile>
  </mat-grid-list>
</div>

<app-calendar-day
  *ngIf="activeDate"
  [activeDate]="activeDate"
  [appointments]="appointments"
  (closeCalendarDay)="onCloseCalendarDay($event)"
  class="calendar-agenda--day z-index-10"
></app-calendar-day>
